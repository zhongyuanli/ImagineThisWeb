{"ast":null,"code":"var _jsxFileName = \"/Users/jeremychang/git/ImagineThisWeb/imaginethisweb/src/views/AuthenticateHomePage.js\";\nimport React, { Component, Fragment } from 'react';\nimport Navigation from \"../components/Navigation\";\nimport \"../css/authenticatehomepage.css\";\nimport { Tab, Tabs } from \"react-bootstrap\";\nimport $ from 'jquery';\nimport Cookies from 'universal-cookie';\nexport class AuthenticateHomePage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      accessToken: '',\n      projectID: '',\n      tokenError: true,\n      projectIDError: true\n    };\n    this.handleChangeProjectID = this.handleChangeProjectID.bind(this);\n    this.handleChangeToken = this.handleChangeToken.bind(this);\n    this.getFigmaProject = this.getFigmaProject.bind(this);\n    this.oauthRedirect = this.oauthRedirect.bind(this);\n  }\n\n  handleChangeToken(event) {\n    this.setState({\n      accessToken: event.target.value\n    });\n  }\n\n  handleChangeProjectID(event) {\n    this.setState({\n      projectID: event.target.value\n    });\n  }\n\n  validateForm() {\n    let error = false;\n\n    if (!(this.state.accessToken.length > 0)) {\n      this.setState({\n        tokenError: true\n      });\n      error = true;\n    } else {\n      this.setState({\n        tokenError: false\n      });\n    }\n\n    if (!(this.state.projectID.length > 0)) {\n      this.setState({\n        projectIDError: true\n      });\n      error = true;\n    } else {\n      this.setState({\n        projectIDError: false\n      });\n    }\n\n    return error;\n  }\n\n  getFigmaProject() {\n    if (!this.validateForm()) {\n      let result = false;\n      let responseData = null;\n      $.ajax({\n        type: \"GET\",\n        url: 'http://localhost:8080/authToken',\n        dataType: \"json\",\n        async: false,\n        data: {\n          'accessToken': this.state.accessToken,\n          'projectID': this.state.projectID,\n          'authType': 'originalToken'\n        },\n        success: function (data) {\n          result = true;\n          responseData = data;\n        },\n        error: function (xhr, status, err) {\n          console.log('error');\n        }\n      });\n\n      if (result) {\n        $(\".error_message\").css('display', 'none');\n        const cookies = new Cookies();\n        cookies.set('accessToken', this.state.accessToken, {\n          path: '/'\n        });\n        cookies.set('projectID', this.state.projectID, {\n          path: '/'\n        });\n        cookies.set('authType', 'originalToken', {\n          path: '/'\n        });\n        this.props.history.push({\n          pathname: '/wireframes',\n          state: {\n            projectName: responseData.projectName,\n            wireframeList: responseData.wireframeList\n          }\n        });\n      } else {\n        $(\".error_message\").css('display', 'block');\n      }\n    }\n  }\n\n  oauthRedirect() {\n    window.location.href = \"https://www.figma.com/oauth?client_id=HbTuw2lrfAC84htJy0Rtf1&redirect_uri=http://localhost:3000/auth&scope=file_read&state=get_token&response_type=code\";\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Navigation, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"outline-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"auth-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      defaultActiveKey: \"auth-token\",\n      id: \"uncontrolled-tab-example\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"auth-token\",\n      title: \"Authenticate with Token\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"auth-form-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 33\n      }\n    }, \"Please enter your Figma access token and project ID, see \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.figma.com/developers/api#access-tokens\",\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 41\n      }\n    }, \"here\"), \" to learn how to generate your Figma access token and project ID\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: 'form-control auth-form-item ' + (this.state.tokenError ? 'is-invalid' : ''),\n      placeholder: \"Enter your Figma access token\",\n      onChange: this.handleChangeToken,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: 'form-control auth-form-item ' + (this.state.projectIDError ? 'is-invalid' : ''),\n      placeholder: \"Enter your Figma project ID\",\n      onChange: this.handleChangeProjectID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary auth-form-item\",\n      onClick: e => this.getFigmaProject(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 33\n      }\n    }, \"Submit\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"auth-form-item error_message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 33\n      }\n    }, \"*The token or the project ID is not correct, please try again\")), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"Oauth2\",\n      title: \"Oauth 2.0 Authentication\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"auth-form-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 33\n      }\n    }, \"Generate your Figma project access authorization with Oauth 2.0 protocol, see the detailed information \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://oauth.net/2/\",\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 86\n      }\n    }, \"here.\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary auth-form-item\",\n      onClick: e => this.oauthRedirect(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 33\n      }\n    }, \"Authenticate with Oauth 2.0\"))))));\n  }\n\n}\nexport default AuthenticateHomePage;","map":{"version":3,"sources":["/Users/jeremychang/git/ImagineThisWeb/imaginethisweb/src/views/AuthenticateHomePage.js"],"names":["React","Component","Fragment","Navigation","Tab","Tabs","$","Cookies","AuthenticateHomePage","constructor","props","state","accessToken","projectID","tokenError","projectIDError","handleChangeProjectID","bind","handleChangeToken","getFigmaProject","oauthRedirect","event","setState","target","value","validateForm","error","length","result","responseData","ajax","type","url","dataType","async","data","success","xhr","status","err","console","log","css","cookies","set","path","history","push","pathname","projectName","wireframeList","window","location","href","render","e"],"mappings":"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","sourcesContent":["import React, {Component, Fragment,} from 'react'\nimport Navigation from \"../components/Navigation\"\nimport \"../css/authenticatehomepage.css\"\nimport {Tab, Tabs} from \"react-bootstrap\";\nimport $ from 'jquery'\nimport Cookies from 'universal-cookie'\n\nexport class AuthenticateHomePage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            accessToken: '',\n            projectID: '',\n            tokenError: true,\n            projectIDError: true\n        }\n\n        this.handleChangeProjectID = this.handleChangeProjectID.bind(this);\n        this.handleChangeToken = this.handleChangeToken.bind(this);\n        this.getFigmaProject = this.getFigmaProject.bind(this)\n        this.oauthRedirect = this.oauthRedirect.bind(this)\n\n    }\n\n    handleChangeToken(event) {\n        this.setState({accessToken: event.target.value});\n    }\n\n    handleChangeProjectID(event) {\n        this.setState({projectID: event.target.value});\n    }\n\n    validateForm() {\n        let error = false;\n        if (!(this.state.accessToken.length > 0)) {\n            this.setState({tokenError: true});\n            error = true\n        } else {\n            this.setState({tokenError: false})\n        }\n        if (!(this.state.projectID.length > 0)) {\n            this.setState({projectIDError: true});\n            error = true\n        } else {\n            this.setState({projectIDError: false});\n        }\n        return error\n    }\n\n    getFigmaProject() {\n        if (!this.validateForm()) {\n            let result = false;\n            let responseData = null;\n            $.ajax({\n                type: \"GET\",\n                url: 'http://localhost:8080/authToken',\n                dataType: \"json\",\n                async: false,\n                data: {\n                    'accessToken': this.state.accessToken,\n                    'projectID': this.state.projectID,\n                    'authType': 'originalToken'\n                },\n                success: function (data) {\n                    result = true;\n                    responseData = data;\n                },\n                error: function (xhr, status, err) {\n                    console.log('error');\n                }\n\n            })\n            if (result) {\n                $(\".error_message\").css('display', 'none');\n                const cookies = new Cookies();\n                cookies.set('accessToken', this.state.accessToken, {path: '/'})\n                cookies.set('projectID', this.state.projectID, {path: '/'})\n                cookies.set('authType', 'originalToken', {path: '/'})\n                this.props.history.push({\n                    pathname: '/wireframes',\n                    state:{\n                        projectName:responseData.projectName,\n                        wireframeList: responseData.wireframeList\n                    }\n                })\n            } else {\n                $(\".error_message\").css('display', 'block');\n            }\n        }\n    }\n\n    oauthRedirect() {\n        window.location.href = \"https://www.figma.com/oauth?client_id=HbTuw2lrfAC84htJy0Rtf1&redirect_uri=http://localhost:3000/auth&scope=file_read&state=get_token&response_type=code\";\n    }\n\n    render() {\n        return (\n            <Fragment>\n                <Navigation/>\n                <div className=\"outline-box\">\n                    <div className=\"auth-form\">\n                        <Tabs defaultActiveKey=\"auth-token\" id=\"uncontrolled-tab-example\">\n                            <Tab eventKey=\"auth-token\" title=\"Authenticate with Token\">\n                                <p className=\"auth-form-item\">Please enter your Figma access token and project ID,\n                                    see <a href=\"https://www.figma.com/developers/api#access-tokens\"\n                                           target=\"_blank\">here</a> to learn how to generate your Figma access token and\n                                    project ID</p>\n                                <input\n                                    className={'form-control auth-form-item ' + (this.state.tokenError ? 'is-invalid' : '')}\n                                    placeholder=\"Enter your Figma access token\" onChange={this.handleChangeToken}/>\n                                <input\n                                    className={'form-control auth-form-item ' + (this.state.projectIDError ? 'is-invalid' : '')}\n                                    placeholder=\"Enter your Figma project ID\" onChange={this.handleChangeProjectID}/>\n                                <button className='btn btn-primary auth-form-item'\n                                        onClick={(e) => this.getFigmaProject()}>Submit\n                                </button>\n                                <p className=\"auth-form-item error_message\">*The token or the project ID is not correct,\n                                    please try again</p>\n                            </Tab>\n                            <Tab eventKey=\"Oauth2\" title=\"Oauth 2.0 Authentication\">\n                                <p className=\"auth-form-item\">Generate your Figma project access authorization with\n                                    Oauth 2.0 protocol, see the detailed information <a href=\"https://oauth.net/2/\"\n                                                                                        target=\"_blank\">here.</a></p>\n                                <button className='btn btn-primary auth-form-item'\n                                        onClick={(e) => this.oauthRedirect()}>Authenticate with Oauth 2.0\n                                </button>\n                            </Tab>\n                        </Tabs>\n                    </div>\n                </div>\n            </Fragment>\n        )\n    }\n}\n\nexport default AuthenticateHomePage\n"]},"metadata":{},"sourceType":"module"}