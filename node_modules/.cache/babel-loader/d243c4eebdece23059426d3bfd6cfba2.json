{"ast":null,"code":"var _jsxFileName = \"/Users/jeremychang/git/ImagineThisWeb/src/views/WireframesPage.js\";\nimport React, { Component, Fragment } from \"react\";\nimport Navigation from \"../components/Navigation\";\nimport WireframeCard from \"../components/WireframeCard\";\nimport '../css/wireframespage.css';\nimport $ from 'jquery';\nimport Button from 'react-bootstrap/Button';\nimport Cookies from \"universal-cookie\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from 'react-loader-spinner';\nimport { DOMAIN, BACKEND_ADDRESS } from '../consts';\nexport class WireframesPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.selectAll = () => {\n      let array = [];\n      this.state.wireframeList.forEach(element => {\n        array.push(element.name);\n      });\n      this.setState({\n        selected: array\n      });\n    };\n\n    this.clearSelected = () => {\n      this.setState({\n        selected: []\n      });\n    };\n\n    if (this.props.history.location.state.wireframeList === undefined) {\n      window.location.href = DOMAIN;\n    }\n\n    const cookie = new Cookies();\n    this.state = {\n      projectName: this.props.history.location.state.projectName,\n      wireframeList: this.props.history.location.state.wireframeList,\n      projectID: cookie.get('projectID'),\n      accessToken: cookie.get('accessToken'),\n      authType: cookie.get('authType'),\n      selected: [],\n      loaderVisible: false,\n      timeMinutes: 0,\n      timeSeconds: 0\n    };\n    this.onChangeHandle = this.onChangeHandle.bind(this);\n    this.toConvertPage = this.toConvertPage.bind(this);\n    this.addToSelected = this.addToSelected.bind(this);\n    this.removeSelected = this.removeSelected.bind(this);\n    this.calcTimeEstimate = this.calcTimeEstimate.bind(this);\n  }\n\n  toConvertPage() {\n    this.calcTimeEstimate(this.state.selected.length);\n    this.setState({\n      loaderVisible: true\n    });\n    $.ajax({\n      type: \"POST\",\n      url: BACKEND_ADDRESS + '/generatePage',\n      contentType: 'application/json',\n      dataType: \"json\",\n      async: true,\n      data: JSON.stringify({\n        'accessToken': this.state.accessToken,\n        'projectID': this.state.projectID,\n        'authType': this.state.authType,\n        'pageList': this.state.selected\n      }),\n      success: function (data) {\n        if (data.isSuccess) {\n          window.location.href = BACKEND_ADDRESS + '/downloadFile?fileName=' + data.fileName;\n        }\n\n        this.setState({\n          loaderVisible: false\n        });\n      }.bind(this),\n      error: function (xhr, status, err) {\n        console.log('error');\n        this.setState({\n          loaderVisible: false\n        });\n      }.bind(this)\n    });\n  }\n\n  addToSelected(name) {\n    this.setState({\n      selected: [...this.state.selected, name]\n    });\n  }\n\n  removeSelected(name) {\n    let array = Array.from(this.state.selected);\n    let index = array.indexOf(name);\n\n    if (index !== -1) {\n      array.splice(index, 1);\n      this.setState({\n        selected: array\n      });\n    }\n  }\n\n  onChangeHandle(name) {\n    let array = this.state.selected;\n\n    if (array.includes(name)) {\n      this.removeSelected(name);\n    } else {\n      this.addToSelected(name);\n    }\n  }\n\n  calcTimeEstimate(numberOfScreens) {\n    let total = numberOfScreens * 15;\n    let minutes = total / 60 >> 0;\n    let seconds = total % 60;\n    this.setState({\n      timeMinutes: minutes,\n      timeSeconds: seconds\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Navigation, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid container--margin-bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 d-flex flex-column align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"mt-5 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    }, \"Please select the wireframes that you wish to convert:\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, this.state.wireframeList.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: 'col-6 col-sm-4 col-lg-3 col-xl-2 pt-4 pb-4 pr-3 pl-3',\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-wrapper\",\n      onClick: () => this.onChangeHandle(item.name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(WireframeCard, {\n      title: item.name,\n      image: item.imageURL,\n      id: item.id,\n      selected: this.state.selected.includes(item.name),\n      onChange: () => this.onChangeHandle(item.name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 37\n      }\n    })))))), /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"navbar fixed-bottom navbar-light bottom-actionbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"mt-1\",\n      onClick: () => this.selectAll(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    }, \"Select all\"), /*#__PURE__*/React.createElement(Button, {\n      className: \"mt-1 ml-2\",\n      onClick: () => this.clearSelected(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, \"Unselect all\")), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bottom-actionbar__selected-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }, \"Currently selected: \", this.state.selected.length), /*#__PURE__*/React.createElement(Button, {\n      className: \"bottom-actionbar__button-convert mt-1\",\n      onClick: () => this.toConvertPage(),\n      disabled: this.state.selected.length === 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, \"Convert to code\")), this.state.loaderVisible && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center align-items-center loader-background\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center flex-column loader-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 29\n      }\n    }, \"We are generating your App template\"), /*#__PURE__*/React.createElement(Loader, {\n      type: \"Watch\",\n      color: \"#005EB8\",\n      width: 50,\n      height: 50,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"lead mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 29\n      }\n    }, \"This will take approximatelly \", this.state.timeMinutes, \" minute(s) and \", this.state.timeSeconds, \" seconds.\"))));\n  }\n\n}\nexport default WireframesPage;","map":{"version":3,"sources":["/Users/jeremychang/git/ImagineThisWeb/src/views/WireframesPage.js"],"names":["React","Component","Fragment","Navigation","WireframeCard","$","Button","Cookies","Loader","DOMAIN","BACKEND_ADDRESS","WireframesPage","constructor","props","selectAll","array","state","wireframeList","forEach","element","push","name","setState","selected","clearSelected","history","location","undefined","window","href","cookie","projectName","projectID","get","accessToken","authType","loaderVisible","timeMinutes","timeSeconds","onChangeHandle","bind","toConvertPage","addToSelected","removeSelected","calcTimeEstimate","length","ajax","type","url","contentType","dataType","async","data","JSON","stringify","success","isSuccess","fileName","error","xhr","status","err","console","log","Array","from","index","indexOf","splice","includes","numberOfScreens","total","minutes","seconds","render","map","item","imageURL","id"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from \"react\"\nimport Navigation from \"../components/Navigation\"\nimport WireframeCard from \"../components/WireframeCard\"\nimport '../css/wireframespage.css'\nimport $ from 'jquery'\nimport Button from 'react-bootstrap/Button'\nimport Cookies from \"universal-cookie\"\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\"\nimport Loader from 'react-loader-spinner'\nimport { DOMAIN, BACKEND_ADDRESS } from '../consts'\n\nexport class WireframesPage extends Component{\n    constructor(props) {\n        super(props)\n        if(this.props.history.location.state.wireframeList === undefined){\n            window.location.href = DOMAIN\n        }\n        const cookie = new Cookies()\n        this.state = {\n            projectName : this.props.history.location.state.projectName,\n            wireframeList : this.props.history.location.state.wireframeList,\n            projectID: cookie.get('projectID'),\n            accessToken: cookie.get('accessToken'),\n            authType: cookie.get('authType'),\n            selected:[],\n            loaderVisible: false,\n            timeMinutes: 0,\n            timeSeconds: 0,\n        }\n        this.onChangeHandle = this.onChangeHandle.bind(this)\n        this.toConvertPage = this.toConvertPage.bind(this)\n        this.addToSelected = this.addToSelected.bind(this)\n        this.removeSelected = this.removeSelected.bind(this)\n        this.calcTimeEstimate = this.calcTimeEstimate.bind(this)\n    }\n\n    toConvertPage() {\n        this.calcTimeEstimate(this.state.selected.length)\n        this.setState({ \n            loaderVisible: true,\n        })\n        $.ajax({\n            type: \"POST\",\n            url: BACKEND_ADDRESS + '/generatePage',\n            contentType: 'application/json',\n            dataType: \"json\",\n            async: true,\n            data: JSON.stringify({\n                'accessToken': this.state.accessToken,\n                'projectID': this.state.projectID,\n                'authType': this.state.authType,\n                'pageList': this.state.selected\n            }),\n            success: function (data) {\n                if(data.isSuccess){\n                    window.location.href = BACKEND_ADDRESS + '/downloadFile?fileName='+ data.fileName\n                }\n                this.setState({ loaderVisible: false })\n            }.bind(this),\n            error: function (xhr, status, err) {\n                console.log('error')\n                this.setState({ loaderVisible: false })\n            }.bind(this)\n        })\n    }\n\n    addToSelected(name) {\n        this.setState({\n            selected:[...this.state.selected, name]\n        })\n    }\n\n    removeSelected(name) {\n        let array = Array.from(this.state.selected)\n        let index = array.indexOf(name)\n        if (index !== -1) {\n            array.splice(index, 1)\n            this.setState({selected: array})\n        }\n    }\n\n    selectAll = () => {\n        let array = []\n        this.state.wireframeList.forEach(element => {\n            array.push(element.name)\n        })\n        this.setState({ selected: array })\n    }\n\n    clearSelected = () => {\n        this.setState({ selected: [] })\n    }\n\n    onChangeHandle(name) {\n        let array = this.state.selected\n        if(array.includes(name)){\n            this.removeSelected(name)\n        } else {\n            this.addToSelected(name)\n        }\n    }\n\n    calcTimeEstimate(numberOfScreens) {\n        let total = numberOfScreens * 15\n        let minutes = total/60>>0\n        let seconds = total % 60\n        this.setState({ \n            timeMinutes: minutes,\n            timeSeconds: seconds,\n        })\n    }\n\n    render() {\n        return(\n            <Fragment>\n                <Navigation/>\n                <div className='container-fluid container--margin-bottom'>\n                    <div className='row'>\n                        <div className='col-12 d-flex flex-column align-items-center'>\n                            <h3 className='mt-5 mb-3'>Please select the wireframes that you wish to convert:</h3>\n                        </div>\n                    </div>\n                    <div className='row'>\n                    </div>\n                    <div className='row'>\n                        {this.state.wireframeList.map((item, index) => (\n                            <div className={'col-6 col-sm-4 col-lg-3 col-xl-2 pt-4 pb-4 pr-3 pl-3'} key={index}>\n                                <div \n                                    className='card-wrapper'\n                                    onClick={() => this.onChangeHandle(item.name)}>\n                                    <WireframeCard\n                                        title={item.name}\n                                        image = {item.imageURL}\n                                        id = {item.id}\n                                        selected={this.state.selected.includes(item.name)}\n                                        onChange={() => this.onChangeHandle(item.name)}\n                                    />\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n                <nav className=\"navbar fixed-bottom navbar-light bottom-actionbar\">\n                    <div>\n                        <Button\n                            className='mt-1'\n                            onClick={() => this.selectAll()}>\n                            Select all\n                        </Button>\n                        <Button\n                            className='mt-1 ml-2'\n                            onClick={() => this.clearSelected()}>\n                            Unselect all\n                        </Button>\n                    </div>\n                    <span className=\"bottom-actionbar__selected-text\">Currently selected: {this.state.selected.length}</span>\n                    <Button \n                        className='bottom-actionbar__button-convert mt-1' \n                        onClick={() => this.toConvertPage()}\n                        disabled={this.state.selected.length === 0}>\n                        Convert to code\n                    </Button>\n                </nav>\n                {this.state.loaderVisible &&\n                    <div className=\"d-flex justify-content-center align-items-center loader-background\">\n                        <div className=\"d-flex align-items-center flex-column loader-wrapper\">\n                            <h4 className=\"mb-4\">We are generating your App template</h4>\n                            <Loader\n                                type=\"Watch\"\n                                color=\"#005EB8\"\n                                width={50}\n                                height={50}/>\n                            <p className=\"lead mt-4\">This will take approximatelly {this.state.timeMinutes} minute(s) and {this.state.timeSeconds} seconds.</p>\n                        </div>\n                    </div>\n                }\n            </Fragment>\n        )\n    }\n}\n\nexport default WireframesPage\n"]},"metadata":{},"sourceType":"module"}